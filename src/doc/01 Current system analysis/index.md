現行システム分析
=====

現行システムの「As-is」調査は、新しいシステムを再構築するための重要なステップです。この作業では、現行システムの全体像を把握し、どの部分を維持し、どの部分を改良する必要があるかを判断します。以下は、現行システムのAs-isを調査する一般的な方法です：

# ドキュメントレビュー：

システムの仕様書、設計書、ユーザーマニュアルなど、既存のドキュメントを確認します。
システムアーキテクチャ、データフロー、インターフェース契約、ビジネスルールなどを理解します。

# ヒアリング：

システムの開発者、運用担当者、エンドユーザーなど、関係者からのヒアリングを行います。
システムの利点や問題点、必要な改善点などの意見を収集します。

# システムの観察とトレース：

実際のシステムを操作し、機能や動作を観察します。
ログやトレース機能を利用して、システムの振る舞いやデータの流れを分析します。
データベース解析：
データベースのスキーマやテーブル構造を確認します。
重要なデータやその関連性を理解します。

# コード解析：

ソースコードをレビューし、システムの実装を理解します。
主要なクラスやメソッド、モジュールの役割を把握します。

# ツールの利用：

静的解析ツールやプロファイラを使用して、コードの品質やパフォーマンスを分析します。
バグトラッキングシステムやバージョン管理システムから、過去の変更履歴や問題点を確認します。
ユーザーアンケートとフィードバック：
エンドユーザーからのアンケートやフィードバックを収集し、ユーザーの抱える課題や希望を把握します。

「再構築案件でAsIsを知る必要がある」「保守開発の品質が悪くリリースの度にトラブルが起こる」

大規模化したシステムを可視化するニーズが高まっています。しかし、既存システムの資料は不足しており、担当者は自分の範囲しか把握していないため、全体を俯瞰することが難しい。

目的と状況に合わせて適切なアプローチを取れば、短時間で適切に整理できる。

# 既存システムの可視化で起こること

既存システムの分析では、最新の資料が手に入らないことが多く、存在してもメンテナンスされていない断片的なものばかりです。
ソースコードは存在するものの、それ以外のドキュメントは不足している。
システム全体を理解している人がおらず、各担当者は自分の担当部分しか把握していないため、全体の連携やつながりを把握している人もいない。

# 何を調べるのか

## 実装（プログラム）に左右されずに仕様を明らかにする

システムを理解する上で大事なことは

* 主要な機能は？

* 主要な情報は？

* 機能と情報の関係は？

## 整理された可視化資料は混沌としたシステムを表せるのか

システムは長年の保守開発で信頼できるドキュメントがなく、プログラムも混沌としている。
これを綺麗に整理できるのか？

整理できたとしてそれは現実と乖離しているのではないか？

## 現実とつながりながら現実の混沌に影響されずに整理する

以下の２つの視点で整理します

* システム境界レベルで一致させる
* DBからビジネスで管理している情報を洗い出す

# 状況に応じた分析

## 手に入る資料を整理し欠けてるピースを補う

手に入る資料を集め整理することで、欠けているものが明らかになります。そこから各情報をつないで欠けているピースを補います。これをトップダウンとボトムアップの両方からつなげることで全体像が把握できるようになります。

## ヒアリング可能な関係者

ヒアリングできる人が使っている資料は信頼性が高いといえます。従って資料の信頼性を関わる人の役割から把握し、その資料を中心に全体を形づくって行きます。

## 利用する資料

入出力とデータの資料を集める

システムの利用者が接する入出力と扱っているデータを明らかにする

## 入出力に関わる資料

画面一覧を調べ、なければ画面のハードコピーを取る

外部とのインターフェース一覧を調べる

なければバッチ処理／APIから連携している部分を探す

## 連携する会社との資料（契約書など）を調べる

データに関わる資料

DBのスキーマ情報を出力する

ファイルフォーマットの資料を探す

## 機能に関わる資料

機能詳細などの機能一覧に対応する詳細な記述

上記資料があれば条件や区分を洗い出すのに利用する

# トップダウン分析

## 信頼性の高い資料から変換する

- 入出力から整理

    - ①画面を整理する
    - ②画面を分類しユースケースを求める
    - ③画面を使っているアクターを求める

    - ①イベントを整理する
    - ③イベントと外部システムの関係を整理する
    - ②イベントを分類しユースケースを求める（画面から求めたUCを再利用）

- データから整理
    - DBのスキーマを整理する
    - DBのスキーマ情報を出力しビジネスにつながる（IDが識別できる）データ（情報）を洗い出す
    - ファイル一覧を分類し、役割別（情報）に整理する

    - ④情報とUCをつなぐ
    - ⑤情報から状態を洗い出し遷移にUCを当てはめる

# ボトムアップ分析

フォルダー構成やプログラムの分割単位などから仕様として取り出せるものを探します。

## フォルダーの分析

トップダウンで分析したBUCやUCなどの名前とフォルダーの対応関係を整理し、ソースコードへのインデックスとして使用します。

## ソースコードの分析

フォルダー分析の結果をもとにソースコードを分析する。
トップダウンで分析したUC、画面、イベント、情報とソースコードの対応を整理する。

# 手に入る資料から整理

## 代表的な資料と対応関係

手に入ったものをベースとして整理する。対応するものがなければ類推して整理します。

- 機能一覧
    - 大中小の分類を一旦、業務・BUC・UCに当てはめる
    - 全体を俯瞰しながら適切な単位に変えていく

- 画面一覧
    - 現在使われている画面をベースに整理する

- インターフェース一覧

    - なければ外部企業との資料から整理する

- テーブル一覧・ER図
    - スキーマ情報から整理する

- 機能詳細
    - 機能一覧に対応する形で詳細な機能を記述した資料

# 二つの目的

既存システムの可視化の目的は大きく分けて、以下の２つに分かれます

- システム再構築に向けた既存システムの分析
    - ToBe開発のためにAsIsを理解するために現状のシステムを理解する

- 保守開発の品質向上に向けた既存システムの分析
    - 影響度分析ができるようなベースを作成する
